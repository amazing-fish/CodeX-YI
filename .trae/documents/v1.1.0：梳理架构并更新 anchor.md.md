## 当前状态概览
- 架构：内核(`YizhiApp`) + 服务层(卦象数据) + 模块层(功能UI)
- 技术路径：纯静态站点，无构建；GitHub Pages 部署；数据 `fetch` 失败时回退至预加载(`data/*.js`)
- 入口：浏览器入口 `apps/yi/index.html:668-682`；应用入口与生命周期 `apps/yi/js/app.js:533-575`
- 关键组件：
  - 配置与性能：`apps/yi/js/app.js:10-30`、`244-293`
  - 错误处理：`apps/yi/js/app.js:296-333`
  - 存储：`apps/yi/js/app.js:155-242`
  - 事件总线：`apps/yi/js/app.js:336-382`
  - 数据服务：初始化与事件 `apps/yi/js/services/hexagram-data-service-module.js:15-31`；数据加载与回退 `39-69`、`78-113`；就绪事件 `27-28`

## 变更目标
- 按 v1.1.0 对 anchor.md 进行全面充实，形成“单一真源”：
  - 完整填充“项目地图”：模块清单(名称/职责/入口/主要依赖)
  - 完整填充“关键逻辑链路”：错误处理/配置加载/数据 IO 边界/事件驱动/性能监控/存储回退
  - 增补“审计记录：v1.1.0”与“最近14个版本变更日志”的 v1.1.0 项，记录架构梳理与锚点更新
  - 优化“PowerShell 手动验证建议”，提供快速核验脚本

## 将更新的 anchor.md 内容要点
### 顶层约定
- 保持现有约定；强调“以 anchor.md 为单一真源，所有依赖/架构调整必须回写此文档”

### 项目地图（替换占位，落地清单）
- 模块列表（名称 / 职责 / 入口 / 主要依赖）：
  - `theme` / 主题切换与跟随系统 / `apps/yi/js/app.js:901-903` / 事件总线、存储
  - `notification` / 全局提示通知 / `apps/yi/js/app.js:904-906` / 事件总线
  - `hexagramData` / 卦象与八卦数据管理 / `apps/yi/js/app.js:907-909` / `services/hexagram-data-service-module.js`
  - `divination` / 铜钱投掷与卦象成型 / `apps/yi/js/app.js:910-912` / 数据服务、UI
  - `history` / 本地历史记录与导出 / `apps/yi/js/app.js:913-915` / 存储
  - `hexagram-analyzer` / 上下卦组合分析 / `apps/yi/js/app.js:916-918` / 数据服务
  - `knowledge` / 八卦知识展示 / `apps/yi/js/app.js:919-921` / 数据服务
  - `search` / 关键词与标签查询 / `apps/yi/js/app.js:922-924` / 数据服务
  - `modal` / 卦象详情模态框 / `apps/yi/js/app.js:925-927` / UI/事件
  - `help` / 帮助说明 / `apps/yi/js/app.js:928-930` / UI
- 入口与加载顺序：`apps/yi/index.html:668-682` 按 `defer` 顺序加载：`app.js` → 预加载 `data/*.js` → `services` → 各 `modules`

### 关键逻辑链路（填充）
- 错误处理：统一入口 `apps/yi/js/app.js:296-333`，模块初始化包装 `apps/yi/js/app.js:606-613`；全局错误与 Promise 拒绝监听 `apps/yi/js/app.js:587-593`、`958-965`
- 配置加载：`apps/yi/js/app.js:10-30`；调试/性能阈值/存储前缀/动画时长
- 数据 IO 边界：`services` `loadHexagramData` 回退与异常 `apps/yi/js/services/hexagram-data-service-module.js:39-69`；`loadBaguaData` 回退 `78-113`
- 事件驱动：模块注册事件 `apps/yi/js/app.js:484-486`；数据就绪事件 `apps/yi/js/services/hexagram-data-service-module.js:27-28`；导航/标签页事件 `apps/yi/js/app.js:682-685`、`720-722`
- 性能监控：计时与阈值告警 `apps/yi/js/app.js:244-293`；模块注册/初始化打点 `apps/yi/js/app.js:475-479`、`609-612`
- 存储回退：`sessionStorage` 不可用时转内存 Map `apps/yi/js/app.js:167-178`、`195-201`
- 生命周期：初始化流程 `apps/yi/js/app.js:533-575`；销毁/重启 `819-849`

### 审计记录（新增 v1.1.0）
- 变更版本：v1.1.0（arch/docs）
- 改动概述：梳理项目结构、架构与技术路径；完整更新 anchor.md 的项目地图与关键逻辑链路；补充验证脚本与版本日志
- 影响模块：文档与协作流程（代码无改动）
- 变更文件与补丁摘要：仅更新 `anchor.md`
- 验证步骤与结果（建议）：见下“PowerShell 手动验证建议”
- 风险与后续事项：持续维护“项目地图”；当模块增删或逻辑更改时即刻回写本锚点

### 最近14个版本变更日志（新增）
- v1.1.0（arch/docs）：完整梳理架构与技术路径；填充项目地图与关键逻辑链路；增加验证脚本；保持静态架构与 GitHub Pages 部署路径不变

### PowerShell 手动验证建议（更新）
- 模块注册数量核验：`Select-String -Path .\apps\yi\js\app.js -Pattern "registerModule" | Measure-Object`
- 脚本加载顺序抽样：`Get-Content -Path .\apps\yi\index.html -TotalCount 30 ; Get-Content -Path .\apps\yi\index.html -Tail 20`
- 数据服务关键路径核验：`Select-String -Path .\apps\yi\js\services\hexagram-data-service-module.js -Pattern "fetch\(|__HEXAGRAM_DATA__|hexagram-data:ready"`
- 模块清单：`Get-ChildItem -Path .\apps\yi\js\modules | Select-Object -ExpandProperty Name`

## 实施步骤
1. 在 `anchor.md` 按上述“内容要点”进行增量更新（替换占位、补充新章节）
2. 自检：逐条运行“PowerShell 手动验证建议”以确认锚点事实正确
3. 回写“审计记录：v1.1.0”并在“最近14个版本变更日志”登记

## 验证与交付
- 采用手动验证（不执行站点预览），确保与代码事实一致
- 仅更新文档，不改动代码与构建/部署路径

请确认以上计划；确认后我将更新 `anchor.md` 完成 v1.1.0 交付。